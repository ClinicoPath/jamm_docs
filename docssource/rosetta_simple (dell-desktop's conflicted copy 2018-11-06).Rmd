---
title: "Rosetta store: simple mediation"
topic: simple
category: rosetta
nickname: ros_simple
output: 
  html_document:
    
    includes:
         in_header: ganalytics.txt
    toc: true
    toc_float:
         collapsed: true
editor_options: 
  chunk_output_type: console
---


```{r echo=FALSE,results='hide'}
source("../R/functions.R")
```

`r keywords("jamovi, SPSS, R, PROCESS, mediation")`

`r version("0.0.3")` 

  
# Introduction

Here you can find comparisons of  results obtained in jamovi jAMM, jamovi (jmv), pure R, and SPSS. When not explicitely discussed, the code of different software is written with the aim of obtaing equivalent results across programs.

# Simple mediation

Here we analyze the data discussed in the `r link_pages(nickname="glm_simple")`. Data can be downloaded from [University of Virginia Research Data Service]('http://static.lib.virginia.edu/statlab/materials/data/mediationData.csv'). Here we renamed the variables:

* grades = X
* selfesteem = M
* happiness = Y

The mediation model is:

<img src="examples/virginia_simple/pathdiagram.png" class="img-responsive" alt="">


# jAMM

As discussed in `r link_pages(nickname="glm_simple")`, jAMM estimation and standard statistical tests are:

<img src="examples/virginia_simple/results1.png" class="img-responsive" alt="">

The bootstrap confidence intervals and z-tests are:

<img src="examples/virginia_simple/results2.png" class="img-responsive" alt="">

# R lm()

Estimation of the regression coefficients can be obtained in vanilla R with two linear regressions:

```{r}

data<-read.csv('../data/virginia_simple_mediation.csv')

mod1<-lm(selfesteem~grades,data=data)
summary(mod1)
mod2<-lm(hapiness~selfesteem+grades,data=data)
summary(mod2)

```

by multiplying `r round(mod1$coefficients[2],digits=4)` and `r round(mod2$coefficients[2],digits=4)`, one obtains the mediated effect `r round(mod2$coefficients[2]*mod1$coefficients[2],digits=4)`, as in jAMM. We can notice that the t-tests in R are slightly different from the z-tests in jAMM. This is simply due to the  computation of the standard errors. jAMM is based on `R lavaan package`, that uses the [expected information matrix](http://lavaan.ugent.be/tutorial/est.html) obtain the standard errors.

# C.I. with Rmediation package

In R, simple mediation models confidence intervals can be computed with [the Rmediation package](https://cran.r-project.org/web/packages/RMediation/RMediation.pdf), which provides several methods of computation.

```{r}
library(RMediation,quietly = T)
sumr1<-summary(mod1)
sumr2<-summary(mod2)
a<-sumr1$coefficients[2,1]
se.a<-sumr1$coefficients[2,2]
b<-sumr2$coefficients[2,1]
se.b<-sumr2$coefficients[2,2]

#### delta method #####
medci(a, b, se.a, se.b,type = "asymp")[1]

#### Monte Carlo method ####
medci(a, b, se.a, se.b,type = "MC",n.mc = 10^6)[1]

```


In R, simple bootstrap confidence intervals can be computed with [the mediation package]( https://cran.r-project.org/web/packages/mediation/mediation.pdf)


# Rosetta's files

`r list_pages(category="rosetta")`


`r issues()`